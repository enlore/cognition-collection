<blueprint>
    <data name="canon" />
    <data name="working" />

    <data name="bananaConfig" value="prop crap" prop="true" /> <!--bullshit intermediate config to shortcircuit adapter/service exception-->

    <adapter name="serviceConfig" prop="true" />
    <adapter name="options" />
    <adapter name="canonical" control="true" /> <!--control === write out behaviour-->
    <data name="svc_dag" service="read serviceConfig" />

    <sensor watch="serviceConfig" run="startService" auto="true" />
    <!--<sensor watch="bunny" run="startService" auto="true" />-->
    <!--<data name="svc" service="data serviceConfig" prop="true" />-->

    <sensor  needs="serviceConfig,options" run="_firstRun" />

</blueprint>

<display> <div id="dummySoNoThrowing"></div> </display>

<script>
    $.cog({
        crap: {
            url: "wooo crap"
        },

        startService: function startService (msg) {

            console.log('ss',msg);

        },

        init: function init () {
            var mi = this.MapItem
            // there's a initializer that fetches everything off an endpoint
            // there's a Create analog that posts to an endpoint
            // Update puts
            // Delete deletes

            var opts = {
                //url: "",
                //fetchOnIniit: true,
                //updateOnSave: true,
                //removeOnDelete: true,
                //updateOnUpdate: true
            }

        },

        _firstRun: function _firstRun (args) {
            if (args.fetchOnInit) {
                this._fetch()
            }
        },

        _newWrapper: function _newWrapper (data, server) {
            var wrapper = {
                clientData: null,
                serverData: null,
                cid: null
            }

            if (server) {
                wrapper.serverData = data
            } else {
                wrapper.clientData = data
            }

            return wrapper
        },

        fetch: function fetch () {
            //this.svc.request()
        },

        cid: 1, // internal id counter

        setCid: function (candidate) {
            candidate.cid = this.cid++
            return candidate
        },

        insert: function (candidate) {
        },

        find: function (query) {
        },

        update: function (query, props) {},

        remove: function (candidate) {
        },

        _create: function _create () {},

        _retrieve: function _retrieve () {},

        _update: function _update () {},

        _delete: function _delete () {}
    })
</script>
